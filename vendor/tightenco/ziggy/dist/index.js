function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)({}).hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},t.apply(null,arguments)}const e=String.prototype.replace,o=/%20/g,n={RFC1738:function(t){return e.call(t,o,"+")},RFC3986:function(t){return String(t)}};var r="RFC3986";const i=Object.prototype.hasOwnProperty,s=Array.isArray,u=function(){const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),l=function t(e,o,n){if(!o)return e;if("object"!=typeof o){if(s(e))e.push(o);else{if(!e||"object"!=typeof e)return[e,o];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,o))&&(e[o]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(o);let r=e;return s(e)&&!s(o)&&(r=function(t,e){const o=e&&e.plainObjects?Object.create(null):{};for(let e=0;e<t.length;++e)void 0!==t[e]&&(o[e]=t[e]);return o}(e,n)),s(e)&&s(o)?(o.forEach(function(o,r){if(i.call(e,r)){const i=e[r];i&&"object"==typeof i&&o&&"object"==typeof o?e[r]=t(i,o,n):e.push(o)}else e[r]=o}),e):Object.keys(o).reduce(function(e,r){const s=o[r];return e[r]=i.call(e,r)?t(e[r],s,n):s,e},r)},c=1024,a=function(t,e){return[].concat(t,e)},f=function(t,e){if(s(t)){const o=[];for(let n=0;n<t.length;n+=1)o.push(e(t[n]));return o}return e(t)},p=Object.prototype.hasOwnProperty,y={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},d=Array.isArray,h=Array.prototype.push,b=function(t,e){h.apply(t,d(e)?e:[e])},m=Date.prototype.toISOString,g={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:function(t,e,o,n,r){if(0===t.length)return t;let i=t;if("symbol"==typeof t?i=Symbol.prototype.toString.call(t):"string"!=typeof t&&(i=String(t)),"iso-8859-1"===o)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});let s="";for(let t=0;t<i.length;t+=c){const e=i.length>=c?i.slice(t,t+c):i,o=[];for(let t=0;t<e.length;++t){let n=e.charCodeAt(t);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||"RFC1738"===r&&(40===n||41===n)?o[o.length]=e.charAt(t):n<128?o[o.length]=u[n]:n<2048?o[o.length]=u[192|n>>6]+u[128|63&n]:n<55296||n>=57344?o[o.length]=u[224|n>>12]+u[128|n>>6&63]+u[128|63&n]:(t+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(t)),o[o.length]=u[240|n>>18]+u[128|n>>12&63]+u[128|n>>6&63]+u[128|63&n])}s+=o.join("")}return s},encodeValuesOnly:!1,format:r,formatter:n[r],indices:!1,serializeDate:function(t){return m.call(t)},skipNulls:!1,strictNullHandling:!1},w={},v=function(t,e,o,n,r,i,s,u,l,c,a,p,y,h,m,j,$,E){let O=t,T=E,R=0,S=!1;for(;void 0!==(T=T.get(w))&&!S;){const e=T.get(t);if(R+=1,void 0!==e){if(e===R)throw new RangeError("Cyclic object value");S=!0}void 0===T.get(w)&&(R=0)}if("function"==typeof c?O=c(e,O):O instanceof Date?O=y(O):"comma"===o&&d(O)&&(O=f(O,function(t){return t instanceof Date?y(t):t})),null===O){if(i)return l&&!j?l(e,g.encoder,$,"key",h):e;O=""}if("string"==typeof(I=O)||"number"==typeof I||"boolean"==typeof I||"symbol"==typeof I||"bigint"==typeof I||function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))}(O))return l?[m(j?e:l(e,g.encoder,$,"key",h))+"="+m(l(O,g.encoder,$,"value",h))]:[m(e)+"="+m(String(O))];var I;const A=[];if(void 0===O)return A;let D;if("comma"===o&&d(O))j&&l&&(O=f(O,l)),D=[{value:O.length>0?O.join(",")||null:void 0}];else if(d(c))D=c;else{const t=Object.keys(O);D=a?t.sort(a):t}const _=u?e.replace(/\./g,"%2E"):e,k=n&&d(O)&&1===O.length?_+"[]":_;if(r&&d(O)&&0===O.length)return k+"[]";for(let e=0;e<D.length;++e){const f=D[e],g="object"==typeof f&&void 0!==f.value?f.value:O[f];if(s&&null===g)continue;const T=p&&u?f.replace(/\./g,"%2E"):f,S=d(O)?"function"==typeof o?o(k,T):k:k+(p?"."+T:"["+T+"]");E.set(t,R);const I=new WeakMap;I.set(w,E),b(A,v(g,S,o,n,r,i,s,u,"comma"===o&&j&&d(O)?null:l,c,a,p,y,h,m,j,$,I))}return A},j=Object.prototype.hasOwnProperty,$=Array.isArray,E={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:function(t,e,o){const n=t.replace(/\+/g," ");if("iso-8859-1"===o)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},O=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},T=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},R=function(t,e,o,n){if(!t)return;const r=o.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g;let s=o.depth>0&&/(\[[^[\]]*])/.exec(r);const u=s?r.slice(0,s.index):r,l=[];if(u){if(!o.plainObjects&&j.call(Object.prototype,u)&&!o.allowPrototypes)return;l.push(u)}let c=0;for(;o.depth>0&&null!==(s=i.exec(r))&&c<o.depth;){if(c+=1,!o.plainObjects&&j.call(Object.prototype,s[1].slice(1,-1))&&!o.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+r.slice(s.index)+"]"),function(t,e,o,n){let r=n?e:T(e,o);for(let e=t.length-1;e>=0;--e){let n;const i=t[e];if("[]"===i&&o.parseArrays)n=o.allowEmptyArrays&&""===r?[]:[].concat(r);else{n=o.plainObjects?Object.create(null):{};const t="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,e=o.decodeDotInKeys?t.replace(/%2E/g,"."):t,s=parseInt(e,10);o.parseArrays||""!==e?!isNaN(s)&&i!==e&&String(s)===e&&s>=0&&o.parseArrays&&s<=o.arrayLimit?(n=[],n[s]=r):"__proto__"!==e&&(n[e]=r):n={0:r}}r=n}return r}(l,e,o,n)};function S(t,e){const o=function(t){if(!t)return E;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");const e=void 0===t.charset?E.charset:t.charset,o=void 0===t.duplicates?E.duplicates:t.duplicates;if("combine"!==o&&"first"!==o&&"last"!==o)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||E.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:E.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:E.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:E.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:E.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:E.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:E.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:E.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:E.decoder,delimiter:"string"==typeof t.delimiter||(n=t.delimiter,"[object RegExp]"===Object.prototype.toString.call(n))?t.delimiter:E.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:E.depth,duplicates:o,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:E.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:E.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:E.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:E.strictNullHandling};var n}(e);if(""===t||null==t)return o.plainObjects?Object.create(null):{};const n="string"==typeof t?function(t,e){const o={__proto__:null},n=(e.ignoreQueryPrefix?t.replace(/^\?/,""):t).split(e.delimiter,Infinity===e.parameterLimit?void 0:e.parameterLimit);let r,i=-1,s=e.charset;if(e.charsetSentinel)for(r=0;r<n.length;++r)0===n[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===n[r]?s="utf-8":"utf8=%26%2310003%3B"===n[r]&&(s="iso-8859-1"),i=r,r=n.length);for(r=0;r<n.length;++r){if(r===i)continue;const t=n[r],u=t.indexOf("]="),l=-1===u?t.indexOf("="):u+1;let c,p;-1===l?(c=e.decoder(t,E.decoder,s,"key"),p=e.strictNullHandling?null:""):(c=e.decoder(t.slice(0,l),E.decoder,s,"key"),p=f(T(t.slice(l+1),e),function(t){return e.decoder(t,E.decoder,s,"value")})),p&&e.interpretNumericEntities&&"iso-8859-1"===s&&(p=O(p)),t.indexOf("[]=")>-1&&(p=$(p)?[p]:p);const y=j.call(o,c);y&&"combine"===e.duplicates?o[c]=a(o[c],p):y&&"last"!==e.duplicates||(o[c]=p)}return o}(t,o):t;let r=o.plainObjects?Object.create(null):{};const i=Object.keys(n);for(let e=0;e<i.length;++e){const s=i[e],u=R(s,n[s],o,"string"==typeof t);r=l(r,u,o)}return!0===o.allowSparse?r:function(t){const e=[{obj:{o:t},prop:"o"}],o=[];for(let t=0;t<e.length;++t){const n=e[t],r=n.obj[n.prop],i=Object.keys(r);for(let t=0;t<i.length;++t){const n=i[t],s=r[n];"object"==typeof s&&null!==s&&-1===o.indexOf(s)&&(e.push({obj:r,prop:n}),o.push(s))}}return function(t){for(;t.length>1;){const e=t.pop(),o=e.obj[e.prop];if(s(o)){const t=[];for(let e=0;e<o.length;++e)void 0!==o[e]&&t.push(o[e]);e.obj[e.prop]=t}}}(e),t}(r)}class I{constructor(t,e,o){var n,r;this.name=t,this.definition=e,this.bindings=null!=(n=e.bindings)?n:{},this.wheres=null!=(r=e.wheres)?r:{},this.config=o}get template(){const t=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return""===t?"/":t}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var t,e;return null!=(t=null==(e=this.template.match(/{[^}?]+\??}/g))?void 0:e.map(t=>({name:t.replace(/{|\??}/g,""),required:!/\?}$/.test(t)})))?t:[]}matchesUrl(t){var e;if(!this.definition.methods.includes("GET"))return!1;const o=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(t,e,o,n)=>{var r;const i=`(?<${o}>${(null==(r=this.wheres[o])?void 0:r.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return n?`(${e}${i})?`:`${e}${i}`}).replace(/^\w+:\/\//,""),[n,r]=t.replace(/^\w+:\/\//,"").split("?"),i=null!=(e=new RegExp(`^${o}/?$`).exec(n))?e:new RegExp(`^${o}/?$`).exec(decodeURI(n));if(i){for(const t in i.groups)i.groups[t]="string"==typeof i.groups[t]?decodeURIComponent(i.groups[t]):i.groups[t];return{params:i.groups,query:S(r)}}return!1}compile(t){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(e,o,n)=>{var r,i;if(!n&&[null,void 0].includes(t[o]))throw new Error(`Ziggy error: '${o}' parameter is required for route '${this.name}'.`);if(this.wheres[o]&&!new RegExp(`^${n?`(${this.wheres[o]})?`:this.wheres[o]}$`).test(null!=(i=t[o])?i:""))throw new Error(`Ziggy error: '${o}' parameter '${t[o]}' does not match required format '${this.wheres[o]}' for route '${this.name}'.`);return encodeURI(null!=(r=t[o])?r:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class A extends String{constructor(e,o,n=!0,r){if(super(),this.t=null!=r?r:"undefined"!=typeof Ziggy?Ziggy:null==globalThis?void 0:globalThis.Ziggy,!this.t&&"undefined"!=typeof document&&document.getElementById("ziggy-routes-json")&&(globalThis.Ziggy=JSON.parse(document.getElementById("ziggy-routes-json").textContent),this.t=globalThis.Ziggy),this.t=t({},this.t,{absolute:n}),e){if(!this.t.routes[e])throw new Error(`Ziggy error: route '${e}' is not in the route list.`);this.i=new I(e,this.t.routes[e],this.t),this.u=this.l(o)}}toString(){const e=Object.keys(this.u).filter(t=>!this.i.parameterSegments.some(({name:e})=>e===t)).filter(t=>"_query"!==t).reduce((e,o)=>t({},e,{[o]:this.u[o]}),{});return this.i.compile(this.u)+function(t,e){let o=t;const i=function(t){if(!t)return g;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.encodeDotInKeys&&"boolean"!=typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");const e=t.charset||g.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let o=r;if(void 0!==t.format){if(!p.call(n,t.format))throw new TypeError("Unknown format option provided.");o=t.format}const i=n[o];let s,u=g.filter;if(("function"==typeof t.filter||d(t.filter))&&(u=t.filter),s=t.arrayFormat in y?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":g.arrayFormat,"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");return{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:g.addQueryPrefix,allowDots:void 0===t.allowDots?!0===t.encodeDotInKeys||g.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:g.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:g.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:void 0===t.delimiter?g.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:g.encode,encodeDotInKeys:"boolean"==typeof t.encodeDotInKeys?t.encodeDotInKeys:g.encodeDotInKeys,encoder:"function"==typeof t.encoder?t.encoder:g.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:g.encodeValuesOnly,filter:u,format:o,formatter:i,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:g.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:g.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:g.strictNullHandling}}(e);let s,u;"function"==typeof i.filter?(u=i.filter,o=u("",o)):d(i.filter)&&(u=i.filter,s=u);const l=[];if("object"!=typeof o||null===o)return"";const c=y[i.arrayFormat],a="comma"===c&&i.commaRoundTrip;s||(s=Object.keys(o)),i.sort&&s.sort(i.sort);const f=new WeakMap;for(let t=0;t<s.length;++t){const e=s[t];i.skipNulls&&null===o[e]||b(l,v(o[e],e,c,a,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,f))}const h=l.join(i.delimiter);let m=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&(m+="iso-8859-1"===i.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),h.length>0?m+h:""}(t({},e,this.u._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(t,e)=>"boolean"==typeof t?Number(t):e(t)})}p(e){e?this.t.absolute&&e.startsWith("/")&&(e=this.h().host+e):e=this.m();let o={};const[n,r]=Object.entries(this.t.routes).find(([t,n])=>o=new I(t,n,this.t).matchesUrl(e))||[void 0,void 0];return t({name:n},o,{route:r})}m(){const{host:t,pathname:e,search:o}=this.h();return(this.t.absolute?t+e:e.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+o}current(e,o){const{name:n,params:r,query:i,route:s}=this.p();if(!e)return n;const u=new RegExp(`^${e.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(n);if([null,void 0].includes(o)||!u)return u;const l=new I(n,s,this.t);o=this.l(o,l);const c=t({},r,i);if(Object.values(o).every(t=>!t)&&!Object.values(c).some(t=>void 0!==t))return!0;const a=(t,e)=>Object.entries(t).every(([t,o])=>Array.isArray(o)&&Array.isArray(e[t])?o.every(o=>e[t].includes(o)||e[t].includes(decodeURIComponent(o))):"object"==typeof o&&"object"==typeof e[t]&&null!==o&&null!==e[t]?a(o,e[t]):e[t]==o||e[t]==decodeURIComponent(o));return a(o,c)}h(){var t,e,o,n,r,i;const{host:s="",pathname:u="",search:l=""}="undefined"!=typeof window?window.location:{};return{host:null!=(t=null==(e=this.t.location)?void 0:e.host)?t:s,pathname:null!=(o=null==(n=this.t.location)?void 0:n.pathname)?o:u,search:null!=(r=null==(i=this.t.location)?void 0:i.search)?r:l}}get params(){const{params:e,query:o}=this.p();return t({},e,o)}get routeParams(){return this.p().params}get queryParams(){return this.p().query}has(t){return this.t.routes.hasOwnProperty(t)}l(e={},o=this.i){null!=e||(e={}),e=["string","number"].includes(typeof e)?[e]:e;const n=o.parameterSegments.filter(({name:t})=>!this.t.defaults[t]);return Array.isArray(e)?e=e.reduce((e,o,r)=>t({},e,n[r]?{[n[r].name]:o}:"object"==typeof o?o:{[o]:""}),{}):1!==n.length||e[n[0].name]||!e.hasOwnProperty(Object.values(o.bindings)[0])&&!e.hasOwnProperty("id")||(e={[n[0].name]:e}),t({},this.v(o),this.j(e,o))}v(e){return e.parameterSegments.filter(({name:t})=>this.t.defaults[t]).reduce((e,{name:o},n)=>t({},e,{[o]:this.t.defaults[o]}),{})}j(e,{bindings:o,parameterSegments:n}){return Object.entries(e).reduce((e,[r,i])=>{if(!i||"object"!=typeof i||Array.isArray(i)||!n.some(({name:t})=>t===r))return t({},e,{[r]:i});if(!i.hasOwnProperty(o[r])){if(!i.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${r}' parameter is missing route model binding key '${o[r]}'.`);o[r]="id"}return t({},e,{[r]:i[o[r]]})},{})}valueOf(){return this.toString()}}function D(t,e,o,n){const r=new A(t,e,o,n);return t?r.toString():r}const _={install(t,e){const o=(t,o,n,r=e)=>D(t,o,n,r);parseInt(t.version)>2?(t.config.globalProperties.route=o,t.provide("route",o)):t.mixin({methods:{route:o}})}};function k(t){if(!t&&!globalThis.Ziggy&&"undefined"==typeof Ziggy&&!document.getElementById("ziggy-routes-json"))throw new Error("Ziggy error: missing configuration. Ensure that a `Ziggy` variable is defined globally or pass a config object into the useRoute hook.");return(e,o,n,r=t)=>D(e,o,n,r)}export{_ as ZiggyVue,D as route,k as useRoute};
